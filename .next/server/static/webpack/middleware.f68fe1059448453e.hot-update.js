"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.js":
/*!***********************!*\
  !*** ./middleware.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(middleware)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! process */ \"(middleware)/./node_modules/next/dist/build/polyfills/process.js\");\n/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(process__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nconst ROLE_CLAIM = 'http://schemas.microsoft.com/ws/2008/06/identity/claims/role';\nconst VERIFIED_CLAIM = 'http://schemas.xmlsoap.org/ws/2009/09/identity/claims/actor';\nasync function verifyToken(token) {\n    try {\n        return await (0,jose__WEBPACK_IMPORTED_MODULE_3__.jwtVerify)(token, new TextEncoder().encode(JWT_SECRET));\n    } catch  {\n        return null;\n    }\n}\nfunction clearCookies(response, cookieNames) {\n    cookieNames.forEach((name)=>response.cookies.set(name, '', {\n            maxAge: 0,\n            path: '/'\n        }));\n}\nasync function middleware(req) {\n    const pathname = req.nextUrl.pathname;\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const tokenCookie = cookieStore.get('token');\n    const otpTokenCookie = cookieStore.get('otp_token');\n    const resetTokenCookie = cookieStore.get('reset');\n    const tokensPresent = [\n        tokenCookie,\n        otpTokenCookie,\n        resetTokenCookie\n    ].filter(Boolean);\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    if (tokensPresent.length > 1) {\n        clearCookies(response, [\n            'token',\n            'otp_token',\n            'reset'\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n    }\n    const isAuthPage = [\n        '/un/login',\n        '/un/register'\n    ].some((path)=>pathname.startsWith(path));\n    const isOtpPage = pathname.startsWith('/un/otpValidatePassword' || 0);\n    const isResetPage = pathname.startsWith('/un/resetPassword');\n    const isConfirmEmailPage = pathname.startsWith('/User/VerifyEmail');\n    const isProtectedPage = pathname.startsWith('/User') || pathname.startsWith('/Admin');\n    async function verifyOrClear(tokenCookie) {\n        if (!tokenCookie) return null;\n        const decoded = await verifyToken(tokenCookie.value);\n        if (!decoded) {\n            clearCookies(response, [\n                'token',\n                'otp_token',\n                'reset'\n            ]);\n            return null;\n        }\n        return decoded;\n    }\n    // OTP page requires valid otp_token\n    if (isOtpPage) {\n        const decoded = await verifyOrClear(otpTokenCookie);\n        if (!decoded) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n        return response;\n    }\n    // Reset page requires valid reset token\n    if (isResetPage) {\n        const decoded = await verifyOrClear(resetTokenCookie);\n        if (!decoded) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n        return response;\n    }\n    // Auth pages\n    if (isAuthPage) {\n        clearCookies(response, [\n            'otp_token',\n            'reset'\n        ]);\n        if (tokenCookie) {\n            const decoded = await verifyOrClear(tokenCookie);\n            if (!decoded) return response; // âœ… Just stay on login page after clearing\n            const roles = decoded.payload[ROLE_CLAIM] || [];\n            const role = Array.isArray(roles) ? roles[0] : roles;\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${role}/dashboard`, req.url));\n        }\n        return response;\n    }\n    // Protected pages\n    if (isProtectedPage) {\n        const decoded = await verifyOrClear(tokenCookie);\n        if (!decoded) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n        const roles = decoded.payload[ROLE_CLAIM] || [];\n        const role = Array.isArray(roles) ? roles[0] : roles;\n        if (isConfirmEmailPage) {\n            const isVerified = decoded.payload[VERIFIED_CLAIM];\n            if (isVerified === 'True') {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${role}/dashboard`, req.url));\n            }\n            return response;\n        }\n        // Role-based restriction\n        if (pathname.startsWith('/Admin') && role !== 'Admin' || pathname.startsWith('/User') && role !== 'User') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${role}/dashboard`, req.url));\n        }\n        return response;\n    }\n    return response;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDVjtBQUNNO0FBQ1Q7QUFFOUIsTUFBTUksYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVO0FBQ3pDLE1BQU1HLGFBQWE7QUFDbkIsTUFBTUMsaUJBQWlCO0FBRXZCLGVBQWVDLFlBQVlDLEtBQUs7SUFDOUIsSUFBSTtRQUNGLE9BQU8sTUFBTVQsK0NBQVNBLENBQUNTLE9BQU8sSUFBSUMsY0FBY0MsTUFBTSxDQUFDUjtJQUN6RCxFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVBLFNBQVNTLGFBQWFDLFFBQVEsRUFBRUMsV0FBVztJQUN6Q0EsWUFBWUMsT0FBTyxDQUFDQyxDQUFBQSxPQUNsQkgsU0FBU1osT0FBTyxDQUFDZ0IsR0FBRyxDQUFDRCxNQUFNLElBQUk7WUFDN0JFLFFBQVE7WUFDUkMsTUFBTTtRQUNSO0FBRUo7QUFFTyxlQUFlQyxXQUFXQyxHQUFHO0lBQ2xDLE1BQU1DLFdBQVdELElBQUlFLE9BQU8sQ0FBQ0QsUUFBUTtJQUNyQyxNQUFNRSxjQUFjLE1BQU12QixxREFBT0E7SUFDakMsTUFBTXdCLGNBQWNELFlBQVlFLEdBQUcsQ0FBQztJQUNwQyxNQUFNQyxpQkFBaUJILFlBQVlFLEdBQUcsQ0FBQztJQUN2QyxNQUFNRSxtQkFBbUJKLFlBQVlFLEdBQUcsQ0FBQztJQUV6QyxNQUFNRyxnQkFBZ0I7UUFBQ0o7UUFBYUU7UUFBZ0JDO0tBQWlCLENBQUNFLE1BQU0sQ0FBQ0M7SUFDN0UsTUFBTWxCLFdBQVdkLHFEQUFZQSxDQUFDaUMsSUFBSTtJQUVsQyxJQUFJSCxjQUFjSSxNQUFNLEdBQUcsR0FBRztRQUM1QnJCLGFBQWFDLFVBQVU7WUFBQztZQUFTO1lBQWE7U0FBUTtRQUN0RCxPQUFPZCxxREFBWUEsQ0FBQ21DLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLGFBQWFkLElBQUllLEdBQUc7SUFDM0Q7SUFFQSxNQUFNQyxhQUFhO1FBQUM7UUFBYTtLQUFlLENBQUNDLElBQUksQ0FBQ25CLENBQUFBLE9BQVFHLFNBQVNpQixVQUFVLENBQUNwQjtJQUNsRixNQUFNcUIsWUFBWWxCLFNBQVNpQixVQUFVLENBQUMsNkJBQTZCLENBQW9CO0lBQ3ZGLE1BQU1FLGNBQWNuQixTQUFTaUIsVUFBVSxDQUFDO0lBQ3hDLE1BQU1HLHFCQUFxQnBCLFNBQVNpQixVQUFVLENBQUM7SUFDL0MsTUFBTUksa0JBQWtCckIsU0FBU2lCLFVBQVUsQ0FBQyxZQUFZakIsU0FBU2lCLFVBQVUsQ0FBQztJQUU1RSxlQUFlSyxjQUFjbkIsV0FBVztRQUN0QyxJQUFJLENBQUNBLGFBQWEsT0FBTztRQUN6QixNQUFNb0IsVUFBVSxNQUFNckMsWUFBWWlCLFlBQVlxQixLQUFLO1FBQ25ELElBQUksQ0FBQ0QsU0FBUztZQUNaakMsYUFBYUMsVUFBVTtnQkFBQztnQkFBUztnQkFBYTthQUFRO1lBQ3RELE9BQU87UUFDVDtRQUNBLE9BQU9nQztJQUNUO0lBRUEsb0NBQW9DO0lBQ3BDLElBQUlMLFdBQVc7UUFDYixNQUFNSyxVQUFVLE1BQU1ELGNBQWNqQjtRQUNwQyxJQUFJLENBQUNrQixTQUFTLE9BQU85QyxxREFBWUEsQ0FBQ21DLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLGFBQWFkLElBQUllLEdBQUc7UUFDdkUsT0FBT3ZCO0lBQ1Q7SUFFQSx3Q0FBd0M7SUFDeEMsSUFBSTRCLGFBQWE7UUFDZixNQUFNSSxVQUFVLE1BQU1ELGNBQWNoQjtRQUNwQyxJQUFJLENBQUNpQixTQUFTLE9BQU85QyxxREFBWUEsQ0FBQ21DLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLGFBQWFkLElBQUllLEdBQUc7UUFDdkUsT0FBT3ZCO0lBQ1Q7SUFFQSxhQUFhO0lBQ2IsSUFBSXdCLFlBQVk7UUFDZHpCLGFBQWFDLFVBQVU7WUFBQztZQUFhO1NBQVE7UUFFN0MsSUFBSVksYUFBYTtZQUNmLE1BQU1vQixVQUFVLE1BQU1ELGNBQWNuQjtZQUNwQyxJQUFJLENBQUNvQixTQUFTLE9BQU9oQyxVQUFVLDJDQUEyQztZQUUxRSxNQUFNa0MsUUFBUUYsUUFBUUcsT0FBTyxDQUFDMUMsV0FBVyxJQUFJLEVBQUU7WUFDL0MsTUFBTTJDLE9BQU9DLE1BQU1DLE9BQU8sQ0FBQ0osU0FBU0EsS0FBSyxDQUFDLEVBQUUsR0FBR0E7WUFDL0MsT0FBT2hELHFEQUFZQSxDQUFDbUMsUUFBUSxDQUFDLElBQUlDLElBQUksQ0FBQyxDQUFDLEVBQUVjLEtBQUssVUFBVSxDQUFDLEVBQUU1QixJQUFJZSxHQUFHO1FBQ3BFO1FBQ0EsT0FBT3ZCO0lBQ1Q7SUFFQSxrQkFBa0I7SUFDbEIsSUFBSThCLGlCQUFpQjtRQUNuQixNQUFNRSxVQUFVLE1BQU1ELGNBQWNuQjtRQUNwQyxJQUFJLENBQUNvQixTQUFTLE9BQU85QyxxREFBWUEsQ0FBQ21DLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLGFBQWFkLElBQUllLEdBQUc7UUFFdkUsTUFBTVcsUUFBUUYsUUFBUUcsT0FBTyxDQUFDMUMsV0FBVyxJQUFJLEVBQUU7UUFDL0MsTUFBTTJDLE9BQU9DLE1BQU1DLE9BQU8sQ0FBQ0osU0FBU0EsS0FBSyxDQUFDLEVBQUUsR0FBR0E7UUFFL0MsSUFBSUwsb0JBQW9CO1lBQ3RCLE1BQU1VLGFBQWFQLFFBQVFHLE9BQU8sQ0FBQ3pDLGVBQWU7WUFDbEQsSUFBSTZDLGVBQWUsUUFBUTtnQkFDekIsT0FBT3JELHFEQUFZQSxDQUFDbUMsUUFBUSxDQUFDLElBQUlDLElBQUksQ0FBQyxDQUFDLEVBQUVjLEtBQUssVUFBVSxDQUFDLEVBQUU1QixJQUFJZSxHQUFHO1lBQ3BFO1lBQ0EsT0FBT3ZCO1FBQ1Q7UUFFQSx5QkFBeUI7UUFDekIsSUFDRSxTQUFVMEIsVUFBVSxDQUFDLGFBQWFVLFNBQVMsV0FDMUMzQixTQUFTaUIsVUFBVSxDQUFDLFlBQVlVLFNBQVMsUUFDMUM7WUFDQSxPQUFPbEQscURBQVlBLENBQUNtQyxRQUFRLENBQUMsSUFBSUMsSUFBSSxDQUFDLENBQUMsRUFBRWMsS0FBSyxVQUFVLENBQUMsRUFBRTVCLElBQUllLEdBQUc7UUFDcEU7UUFFQSxPQUFPdkI7SUFDVDtJQUVBLE9BQU9BO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTW9oYW1hZFxcT25lRHJpdmVcXERlc2t0b3BcXFJ1aGFuX05leHQrYXNwXFxydWhhblxcbWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGp3dFZlcmlmeSB9IGZyb20gJ2pvc2UnO1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcclxuaW1wb3J0IHsgcmVmIH0gZnJvbSAncHJvY2Vzcyc7XHJcblxyXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVDtcclxuY29uc3QgUk9MRV9DTEFJTSA9ICdodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUnO1xyXG5jb25zdCBWRVJJRklFRF9DTEFJTSA9ICdodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA5LzA5L2lkZW50aXR5L2NsYWltcy9hY3Rvcic7XHJcblxyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbikge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSldUX1NFQ1JFVCkpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhckNvb2tpZXMocmVzcG9uc2UsIGNvb2tpZU5hbWVzKSB7XHJcbiAgY29va2llTmFtZXMuZm9yRWFjaChuYW1lID0+XHJcbiAgICByZXNwb25zZS5jb29raWVzLnNldChuYW1lLCAnJywge1xyXG4gICAgICBtYXhBZ2U6IDAsXHJcbiAgICAgIHBhdGg6ICcvJyxcclxuICAgIH0pXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxKSB7XHJcbiAgY29uc3QgcGF0aG5hbWUgPSByZXEubmV4dFVybC5wYXRobmFtZTtcclxuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcclxuICBjb25zdCB0b2tlbkNvb2tpZSA9IGNvb2tpZVN0b3JlLmdldCgndG9rZW4nKTtcclxuICBjb25zdCBvdHBUb2tlbkNvb2tpZSA9IGNvb2tpZVN0b3JlLmdldCgnb3RwX3Rva2VuJyk7XHJcbiAgY29uc3QgcmVzZXRUb2tlbkNvb2tpZSA9IGNvb2tpZVN0b3JlLmdldCgncmVzZXQnKTtcclxuXHJcbiAgY29uc3QgdG9rZW5zUHJlc2VudCA9IFt0b2tlbkNvb2tpZSwgb3RwVG9rZW5Db29raWUsIHJlc2V0VG9rZW5Db29raWVdLmZpbHRlcihCb29sZWFuKTtcclxuICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KCk7XHJcblxyXG4gIGlmICh0b2tlbnNQcmVzZW50Lmxlbmd0aCA+IDEpIHtcclxuICAgIGNsZWFyQ29va2llcyhyZXNwb25zZSwgWyd0b2tlbicsICdvdHBfdG9rZW4nLCAncmVzZXQnXSk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy91bi9sb2dpbicsIHJlcS51cmwpKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGlzQXV0aFBhZ2UgPSBbJy91bi9sb2dpbicsICcvdW4vcmVnaXN0ZXInXS5zb21lKHBhdGggPT4gcGF0aG5hbWUuc3RhcnRzV2l0aChwYXRoKSk7XHJcbiAgY29uc3QgaXNPdHBQYWdlID0gcGF0aG5hbWUuc3RhcnRzV2l0aCgnL3VuL290cFZhbGlkYXRlUGFzc3dvcmQnIHx8ICcvdW4vZm9yZ290UGFzc3dvcmQnKTtcclxuICBjb25zdCBpc1Jlc2V0UGFnZSA9IHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy91bi9yZXNldFBhc3N3b3JkJyk7XHJcbiAgY29uc3QgaXNDb25maXJtRW1haWxQYWdlID0gcGF0aG5hbWUuc3RhcnRzV2l0aCgnL1VzZXIvVmVyaWZ5RW1haWwnKTtcclxuICBjb25zdCBpc1Byb3RlY3RlZFBhZ2UgPSBwYXRobmFtZS5zdGFydHNXaXRoKCcvVXNlcicpIHx8IHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9BZG1pbicpO1xyXG5cclxuICBhc3luYyBmdW5jdGlvbiB2ZXJpZnlPckNsZWFyKHRva2VuQ29va2llKSB7XHJcbiAgICBpZiAoIXRva2VuQ29va2llKSByZXR1cm4gbnVsbDtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbkNvb2tpZS52YWx1ZSk7XHJcbiAgICBpZiAoIWRlY29kZWQpIHtcclxuICAgICAgY2xlYXJDb29raWVzKHJlc3BvbnNlLCBbJ3Rva2VuJywgJ290cF90b2tlbicsICdyZXNldCddKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVjb2RlZDtcclxuICB9XHJcblxyXG4gIC8vIE9UUCBwYWdlIHJlcXVpcmVzIHZhbGlkIG90cF90b2tlblxyXG4gIGlmIChpc090cFBhZ2UpIHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2ZXJpZnlPckNsZWFyKG90cFRva2VuQ29va2llKTtcclxuICAgIGlmICghZGVjb2RlZCkgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvdW4vbG9naW4nLCByZXEudXJsKSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfVxyXG5cclxuICAvLyBSZXNldCBwYWdlIHJlcXVpcmVzIHZhbGlkIHJlc2V0IHRva2VuXHJcbiAgaWYgKGlzUmVzZXRQYWdlKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gYXdhaXQgdmVyaWZ5T3JDbGVhcihyZXNldFRva2VuQ29va2llKTtcclxuICAgIGlmICghZGVjb2RlZCkgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvdW4vbG9naW4nLCByZXEudXJsKSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfVxyXG5cclxuICAvLyBBdXRoIHBhZ2VzXHJcbiAgaWYgKGlzQXV0aFBhZ2UpIHtcclxuICAgIGNsZWFyQ29va2llcyhyZXNwb25zZSwgWydvdHBfdG9rZW4nLCAncmVzZXQnXSk7XHJcblxyXG4gICAgaWYgKHRva2VuQ29va2llKSB7XHJcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2ZXJpZnlPckNsZWFyKHRva2VuQ29va2llKTtcclxuICAgICAgaWYgKCFkZWNvZGVkKSByZXR1cm4gcmVzcG9uc2U7IC8vIOKchSBKdXN0IHN0YXkgb24gbG9naW4gcGFnZSBhZnRlciBjbGVhcmluZ1xyXG5cclxuICAgICAgY29uc3Qgcm9sZXMgPSBkZWNvZGVkLnBheWxvYWRbUk9MRV9DTEFJTV0gfHwgW107XHJcbiAgICAgIGNvbnN0IHJvbGUgPSBBcnJheS5pc0FycmF5KHJvbGVzKSA/IHJvbGVzWzBdIDogcm9sZXM7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChgLyR7cm9sZX0vZGFzaGJvYXJkYCwgcmVxLnVybCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJvdGVjdGVkIHBhZ2VzXHJcbiAgaWYgKGlzUHJvdGVjdGVkUGFnZSkge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHZlcmlmeU9yQ2xlYXIodG9rZW5Db29raWUpO1xyXG4gICAgaWYgKCFkZWNvZGVkKSByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy91bi9sb2dpbicsIHJlcS51cmwpKTtcclxuXHJcbiAgICBjb25zdCByb2xlcyA9IGRlY29kZWQucGF5bG9hZFtST0xFX0NMQUlNXSB8fCBbXTtcclxuICAgIGNvbnN0IHJvbGUgPSBBcnJheS5pc0FycmF5KHJvbGVzKSA/IHJvbGVzWzBdIDogcm9sZXM7XHJcblxyXG4gICAgaWYgKGlzQ29uZmlybUVtYWlsUGFnZSkge1xyXG4gICAgICBjb25zdCBpc1ZlcmlmaWVkID0gZGVjb2RlZC5wYXlsb2FkW1ZFUklGSUVEX0NMQUlNXTtcclxuICAgICAgaWYgKGlzVmVyaWZpZWQgPT09ICdUcnVlJykge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChgLyR7cm9sZX0vZGFzaGJvYXJkYCwgcmVxLnVybCkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSb2xlLWJhc2VkIHJlc3RyaWN0aW9uXHJcbiAgICBpZiAoXHJcbiAgICAgIChwYXRobmFtZS5zdGFydHNXaXRoKCcvQWRtaW4nKSAmJiByb2xlICE9PSAnQWRtaW4nKSB8fFxyXG4gICAgICAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL1VzZXInKSAmJiByb2xlICE9PSAnVXNlcicpXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKGAvJHtyb2xlfS9kYXNoYm9hcmRgLCByZXEudXJsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3BvbnNlO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJqd3RWZXJpZnkiLCJjb29raWVzIiwicmVmIiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJST0xFX0NMQUlNIiwiVkVSSUZJRURfQ0xBSU0iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJjbGVhckNvb2tpZXMiLCJyZXNwb25zZSIsImNvb2tpZU5hbWVzIiwiZm9yRWFjaCIsIm5hbWUiLCJzZXQiLCJtYXhBZ2UiLCJwYXRoIiwibWlkZGxld2FyZSIsInJlcSIsInBhdGhuYW1lIiwibmV4dFVybCIsImNvb2tpZVN0b3JlIiwidG9rZW5Db29raWUiLCJnZXQiLCJvdHBUb2tlbkNvb2tpZSIsInJlc2V0VG9rZW5Db29raWUiLCJ0b2tlbnNQcmVzZW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsIm5leHQiLCJsZW5ndGgiLCJyZWRpcmVjdCIsIlVSTCIsInVybCIsImlzQXV0aFBhZ2UiLCJzb21lIiwic3RhcnRzV2l0aCIsImlzT3RwUGFnZSIsImlzUmVzZXRQYWdlIiwiaXNDb25maXJtRW1haWxQYWdlIiwiaXNQcm90ZWN0ZWRQYWdlIiwidmVyaWZ5T3JDbGVhciIsImRlY29kZWQiLCJ2YWx1ZSIsInJvbGVzIiwicGF5bG9hZCIsInJvbGUiLCJBcnJheSIsImlzQXJyYXkiLCJpc1ZlcmlmaWVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./middleware.js\n");

/***/ })

});