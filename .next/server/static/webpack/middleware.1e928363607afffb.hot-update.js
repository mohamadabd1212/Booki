/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.js":
/*!***********************!*\
  !*** ./middleware.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(middleware)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! process */ \"(middleware)/./node_modules/next/dist/build/polyfills/process.js\");\n/* harmony import */ var process__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(process__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nconst ROLE_CLAIM = 'http://schemas.microsoft.com/ws/2008/06/identity/claims/role';\nconst VERIFIED_CLAIM = 'http://schemas.xmlsoap.org/ws/2009/09/identity/claims/actor';\nasync function verifyToken(token) {\n    try {\n        return await (0,jose__WEBPACK_IMPORTED_MODULE_3__.jwtVerify)(token, new TextEncoder().encode(JWT_SECRET));\n    } catch  {\n        return null;\n    }\n}\nfunction clearCookies(response, cookieNames) {\n    cookieNames.forEach((name)=>response.cookies.set(name, '', {\n            maxAge: 0,\n            path: '/'\n        }));\n}\nasync function middleware(req) {\n    const pathname = req.nextUrl.pathname;\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const tokenCookie = cookieStore.get('token');\n    const otpTokenCookie = cookieStore.get('otp_token');\n    const resetTokenCookie = cookieStore.get('reset');\n    const tokensPresent = [\n        tokenCookie,\n        otpTokenCookie,\n        resetTokenCookie\n    ].filter(Boolean);\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    if (tokensPresent.length > 1) {\n        clearCookies(response, [\n            'token',\n            'otp_token',\n            'reset'\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n    }\n    const isAuthPage = [\n        '/un/login',\n        '/un/register'\n    ].some((path)=>pathname.startsWith(path));\n    const isOtpPage = pathname.startsWith('/un/otpValidatePassword');\n    const isResetPage = pathname.startsWith('/un/resetPassword');\n    const isConfirmEmailPage = pathname.startsWith('/User/VerifyEmail');\n    const isProtectedPage = pathname.startsWith('/User') || pathname.startsWith('/Admin');\n    async function verifyOrClear(tokenCookie) {\n        if (!tokenCookie) return null;\n        const decoded = await verifyToken(tokenCookie.value);\n        if (!decoded) {\n            clearCookies(response, [\n                'token',\n                'otp_token',\n                'reset'\n            ]);\n            return null;\n        }\n        return decoded;\n    }\n    // OTP page requires valid otp_token\n    if (isOtpPage) {\n        const decoded = await verifyOrClear(otpTokenCookie);\n        if (!decoded) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n        return response;\n    }\n    // Reset page requires valid reset token\n    if (isResetPage) {\n        const decoded = await verifyOrClear(resetTokenCookie);\n        if (!decoded) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n        return response;\n    }\n    // Auth pages\n    if (isAuthPage) {\n        clearCookies(response, [\n            'otp_token',\n            'reset'\n        ]);\n        if (tokenCookie) {\n            const decoded = await verifyOrClear(tokenCookie);\n            if (!decoded) return response; // âœ… Just stay on login page after clearing\n            const roles = decoded.payload[ROLE_CLAIM] || [];\n            const role = Array.isArray(roles) ? roles[0] : roles;\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${role}/dashboard`, req.url));\n        }\n        return response;\n    }\n    // Protected pages\n    if (isProtectedPage) {\n        const decoded = await verifyOrClear(tokenCookie);\n        if (!decoded) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/un/login', req.url));\n        const roles = decoded.payload[ROLE_CLAIM] || [];\n        const role = Array.isArray(roles) ? roles[0] : roles;\n        if (isConfirmEmailPage) {\n            const isVerified = decoded.payload[VERIFIED_CLAIM];\n            if (isVerified === 'True') {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${role}/dashboard`, req.url));\n            }\n            return response;\n        }\n        // Role-based restriction\n        if (pathname.startsWith('/Admin') && role !== 'Admin' || pathname.startsWith('/User') && role !== 'User') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${role}/dashboard`, req.url));\n        }\n        return response;\n    }\n    return response;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUEsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxNb2hhbWFkXFxPbmVEcml2ZVxcRGVza3RvcFxcUnVoYW5fTmV4dCthc3BcXHJ1aGFuXFxtaWRkbGV3YXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgand0VmVyaWZ5IH0gZnJvbSAnam9zZSc7XHJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xyXG5pbXBvcnQgeyByZWYgfSBmcm9tICdwcm9jZXNzJztcclxuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUO1xyXG5jb25zdCBST0xFX0NMQUlNID0gJ2h0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSc7XHJcbmNvbnN0IFZFUklGSUVEX0NMQUlNID0gJ2h0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDkvMDkvaWRlbnRpdHkvY2xhaW1zL2FjdG9yJztcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVRva2VuKHRva2VuKSB7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKV1RfU0VDUkVUKSk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyQ29va2llcyhyZXNwb25zZSwgY29va2llTmFtZXMpIHtcclxuICBjb29raWVOYW1lcy5mb3JFYWNoKG5hbWUgPT5cclxuICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsICcnLCB7XHJcbiAgICAgIG1heEFnZTogMCxcclxuICAgICAgcGF0aDogJy8nLFxyXG4gICAgfSlcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXEpIHtcclxuICBjb25zdCBwYXRobmFtZSA9IHJlcS5uZXh0VXJsLnBhdGhuYW1lO1xyXG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xyXG4gIGNvbnN0IHRva2VuQ29va2llID0gY29va2llU3RvcmUuZ2V0KCd0b2tlbicpO1xyXG4gIGNvbnN0IG90cFRva2VuQ29va2llID0gY29va2llU3RvcmUuZ2V0KCdvdHBfdG9rZW4nKTtcclxuICBjb25zdCByZXNldFRva2VuQ29va2llID0gY29va2llU3RvcmUuZ2V0KCdyZXNldCcpO1xyXG5cclxuICBjb25zdCB0b2tlbnNQcmVzZW50ID0gW3Rva2VuQ29va2llLCBvdHBUb2tlbkNvb2tpZSwgcmVzZXRUb2tlbkNvb2tpZV0uZmlsdGVyKEJvb2xlYW4pO1xyXG4gIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoKTtcclxuXHJcbiAgaWYgKHRva2Vuc1ByZXNlbnQubGVuZ3RoID4gMSkge1xyXG4gICAgY2xlYXJDb29raWVzKHJlc3BvbnNlLCBbJ3Rva2VuJywgJ290cF90b2tlbicsICdyZXNldCddKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL3VuL2xvZ2luJywgcmVxLnVybCkpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaXNBdXRoUGFnZSA9IFsnL3VuL2xvZ2luJywgJy91bi9yZWdpc3RlciddLnNvbWUocGF0aCA9PiBwYXRobmFtZS5zdGFydHNXaXRoKHBhdGgpKTtcclxuICBjb25zdCBpc090cFBhZ2UgPSBwYXRobmFtZS5zdGFydHNXaXRoKCcvdW4vb3RwVmFsaWRhdGVQYXNzd29yZCcpO1xyXG4gIGNvbnN0IGlzUmVzZXRQYWdlID0gcGF0aG5hbWUuc3RhcnRzV2l0aCgnL3VuL3Jlc2V0UGFzc3dvcmQnKTtcclxuICBjb25zdCBpc0NvbmZpcm1FbWFpbFBhZ2UgPSBwYXRobmFtZS5zdGFydHNXaXRoKCcvVXNlci9WZXJpZnlFbWFpbCcpO1xyXG4gIGNvbnN0IGlzUHJvdGVjdGVkUGFnZSA9IHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9Vc2VyJykgfHwgcGF0aG5hbWUuc3RhcnRzV2l0aCgnL0FkbWluJyk7XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIHZlcmlmeU9yQ2xlYXIodG9rZW5Db29raWUpIHtcclxuICAgIGlmICghdG9rZW5Db29raWUpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHZlcmlmeVRva2VuKHRva2VuQ29va2llLnZhbHVlKTtcclxuICAgIGlmICghZGVjb2RlZCkge1xyXG4gICAgICBjbGVhckNvb2tpZXMocmVzcG9uc2UsIFsndG9rZW4nLCAnb3RwX3Rva2VuJywgJ3Jlc2V0J10pO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWNvZGVkO1xyXG4gIH1cclxuXHJcbiAgLy8gT1RQIHBhZ2UgcmVxdWlyZXMgdmFsaWQgb3RwX3Rva2VuXHJcbiAgaWYgKGlzT3RwUGFnZSkge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHZlcmlmeU9yQ2xlYXIob3RwVG9rZW5Db29raWUpO1xyXG4gICAgaWYgKCFkZWNvZGVkKSByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy91bi9sb2dpbicsIHJlcS51cmwpKTtcclxuICAgIHJldHVybiByZXNwb25zZTtcclxuICB9XHJcblxyXG4gIC8vIFJlc2V0IHBhZ2UgcmVxdWlyZXMgdmFsaWQgcmVzZXQgdG9rZW5cclxuICBpZiAoaXNSZXNldFBhZ2UpIHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2ZXJpZnlPckNsZWFyKHJlc2V0VG9rZW5Db29raWUpO1xyXG4gICAgaWYgKCFkZWNvZGVkKSByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy91bi9sb2dpbicsIHJlcS51cmwpKTtcclxuICAgIHJldHVybiByZXNwb25zZTtcclxuICB9XHJcblxyXG4gIC8vIEF1dGggcGFnZXNcclxuICBpZiAoaXNBdXRoUGFnZSkge1xyXG4gICAgY2xlYXJDb29raWVzKHJlc3BvbnNlLCBbJ290cF90b2tlbicsICdyZXNldCddKTtcclxuXHJcbiAgICBpZiAodG9rZW5Db29raWUpIHtcclxuICAgICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHZlcmlmeU9yQ2xlYXIodG9rZW5Db29raWUpO1xyXG4gICAgICBpZiAoIWRlY29kZWQpIHJldHVybiByZXNwb25zZTsgLy8g4pyFIEp1c3Qgc3RheSBvbiBsb2dpbiBwYWdlIGFmdGVyIGNsZWFyaW5nXHJcblxyXG4gICAgICBjb25zdCByb2xlcyA9IGRlY29kZWQucGF5bG9hZFtST0xFX0NMQUlNXSB8fCBbXTtcclxuICAgICAgY29uc3Qgcm9sZSA9IEFycmF5LmlzQXJyYXkocm9sZXMpID8gcm9sZXNbMF0gOiByb2xlcztcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKGAvJHtyb2xlfS9kYXNoYm9hcmRgLCByZXEudXJsKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfVxyXG5cclxuICAvLyBQcm90ZWN0ZWQgcGFnZXNcclxuICBpZiAoaXNQcm90ZWN0ZWRQYWdlKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gYXdhaXQgdmVyaWZ5T3JDbGVhcih0b2tlbkNvb2tpZSk7XHJcbiAgICBpZiAoIWRlY29kZWQpIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL3VuL2xvZ2luJywgcmVxLnVybCkpO1xyXG5cclxuICAgIGNvbnN0IHJvbGVzID0gZGVjb2RlZC5wYXlsb2FkW1JPTEVfQ0xBSU1dIHx8IFtdO1xyXG4gICAgY29uc3Qgcm9sZSA9IEFycmF5LmlzQXJyYXkocm9sZXMpID8gcm9sZXNbMF0gOiByb2xlcztcclxuXHJcbiAgICBpZiAoaXNDb25maXJtRW1haWxQYWdlKSB7XHJcbiAgICAgIGNvbnN0IGlzVmVyaWZpZWQgPSBkZWNvZGVkLnBheWxvYWRbVkVSSUZJRURfQ0xBSU1dO1xyXG4gICAgICBpZiAoaXNWZXJpZmllZCA9PT0gJ1RydWUnKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKGAvJHtyb2xlfS9kYXNoYm9hcmRgLCByZXEudXJsKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJvbGUtYmFzZWQgcmVzdHJpY3Rpb25cclxuICAgIGlmIChcclxuICAgICAgKHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9BZG1pbicpICYmIHJvbGUgIT09ICdBZG1pbicpIHx8XHJcbiAgICAgIChwYXRobmFtZS5zdGFydHNXaXRoKCcvVXNlcicpICYmIHJvbGUgIT09ICdVc2VyJylcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoYC8ke3JvbGV9L2Rhc2hib2FyZGAsIHJlcS51cmwpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImp3dFZlcmlmeSIsImNvb2tpZXMiLCJyZWYiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsIlJPTEVfQ0xBSU0iLCJWRVJJRklFRF9DTEFJTSIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJUZXh0RW5jb2RlciIsImVuY29kZSIsImNsZWFyQ29va2llcyIsInJlc3BvbnNlIiwiY29va2llTmFtZXMiLCJmb3JFYWNoIiwibmFtZSIsInNldCIsIm1heEFnZSIsInBhdGgiLCJtaWRkbGV3YXJlIiwicmVxIiwicGF0aG5hbWUiLCJuZXh0VXJsIiwiY29va2llU3RvcmUiLCJ0b2tlbkNvb2tpZSIsImdldCIsIm90cFRva2VuQ29va2llIiwicmVzZXRUb2tlbkNvb2tpZSIsInRva2Vuc1ByZXNlbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwibmV4dCIsImxlbmd0aCIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiaXNBdXRoUGFnZSIsInNvbWUiLCJzdGFydHNXaXRoIiwiaXNPdHBQYWdlIiwiaXNSZXNldFBhZ2UiLCJpc0NvbmZpcm1FbWFpbFBhZ2UiLCJpc1Byb3RlY3RlZFBhZ2UiLCJ2ZXJpZnlPckNsZWFyIiwiZGVjb2RlZCIsInZhbHVlIiwicm9sZXMiLCJwYXlsb2FkIiwicm9sZSIsIkFycmF5IiwiaXNBcnJheSIsImlzVmVyaWZpZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.js\n");

/***/ }),

/***/ "(middleware)/./node_modules/next/dist/build/polyfills/process.js":
/*!***********************************************************!*\
  !*** ./node_modules/next/dist/build/polyfills/process.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar _global_process, _global_process1;\nmodule.exports = ((_global_process = __webpack_require__.g.process) == null ? void 0 : _global_process.env) && typeof ((_global_process1 = __webpack_require__.g.process) == null ? void 0 : _global_process1.env) === 'object' ? __webpack_require__.g.process : __webpack_require__(/*! next/dist/compiled/process */ \"(middleware)/./node_modules/next/dist/compiled/process/browser.js\");\n\n//# sourceMappingURL=process.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC9wb2x5ZmlsbHMvcHJvY2Vzcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EscUNBQXFDLHFCQUFNLGlGQUFpRixxQkFBTSxrRUFBa0UscUJBQU0sV0FBVyxtQkFBTyxDQUFDLHFHQUE0Qjs7QUFFelAiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTW9oYW1hZFxcT25lRHJpdmVcXERlc2t0b3BcXFJ1aGFuX05leHQrYXNwXFxydWhhblxcbm9kZV9tb2R1bGVzXFxuZXh0XFxkaXN0XFxidWlsZFxccG9seWZpbGxzXFxwcm9jZXNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9nbG9iYWxfcHJvY2VzcywgX2dsb2JhbF9wcm9jZXNzMTtcbm1vZHVsZS5leHBvcnRzID0gKChfZ2xvYmFsX3Byb2Nlc3MgPSBnbG9iYWwucHJvY2VzcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9nbG9iYWxfcHJvY2Vzcy5lbnYpICYmIHR5cGVvZiAoKF9nbG9iYWxfcHJvY2VzczEgPSBnbG9iYWwucHJvY2VzcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9nbG9iYWxfcHJvY2VzczEuZW52KSA9PT0gJ29iamVjdCcgPyBnbG9iYWwucHJvY2VzcyA6IHJlcXVpcmUoJ25leHQvZGlzdC9jb21waWxlZC9wcm9jZXNzJyk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2Nlc3MuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/next/dist/build/polyfills/process.js\n");

/***/ }),

/***/ "(middleware)/./node_modules/next/dist/compiled/process/browser.js":
/*!************************************************************!*\
  !*** ./node_modules/next/dist/compiled/process/browser.js ***!
  \************************************************************/
/***/ ((module) => {

eval("var __dirname = \"/\";\n(function(){var e={229:function(e){var t=e.exports={};var r;var n;function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}(function(){try{if(typeof setTimeout===\"function\"){r=setTimeout}else{r=defaultSetTimout}}catch(e){r=defaultSetTimout}try{if(typeof clearTimeout===\"function\"){n=clearTimeout}else{n=defaultClearTimeout}}catch(e){n=defaultClearTimeout}})();function runTimeout(e){if(r===setTimeout){return setTimeout(e,0)}if((r===defaultSetTimout||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout){return clearTimeout(e)}if((n===defaultClearTimeout||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var i=[];var o=false;var u;var a=-1;function cleanUpNextTick(){if(!o||!u){return}o=false;if(u.length){i=u.concat(i)}else{a=-1}if(i.length){drainQueue()}}function drainQueue(){if(o){return}var e=runTimeout(cleanUpNextTick);o=true;var t=i.length;while(t){u=i;i=[];while(++a<t){if(u){u[a].run()}}a=-1;t=i.length}u=null;o=false;runClearTimeout(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new Item(e,t));if(i.length===1&&!o){runTimeout(drainQueue)}};function Item(e,t){this.fun=e;this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};t.title=\"browser\";t.browser=true;t.env={};t.argv=[];t.version=\"\";t.versions={};function noop(){}t.on=noop;t.addListener=noop;t.once=noop;t.off=noop;t.removeListener=noop;t.removeAllListeners=noop;t.emit=noop;t.prependListener=noop;t.prependOnceListener=noop;t.listeners=function(e){return[]};t.binding=function(e){throw new Error(\"process.binding is not supported\")};t.cwd=function(){return\"/\"};t.chdir=function(e){throw new Error(\"process.chdir is not supported\")};t.umask=function(){return 0}}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var o=true;try{e[r](i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return i.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var r=__nccwpck_require__(229);module.exports=r})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jb21waWxlZC9wcm9jZXNzL2Jyb3dzZXIuanMiLCJtYXBwaW5ncyI6IjtBQUFBLFlBQVksT0FBTyxnQkFBZ0IsbUJBQW1CLE1BQU0sTUFBTSw0QkFBNEIsbURBQW1ELCtCQUErQixxREFBcUQsWUFBWSxJQUFJLG1DQUFtQyxhQUFhLEtBQUssb0JBQW9CLFNBQVMsbUJBQW1CLElBQUkscUNBQXFDLGVBQWUsS0FBSyx1QkFBdUIsU0FBUyx1QkFBdUIsSUFBSSx1QkFBdUIsbUJBQW1CLHVCQUF1QiwyQ0FBMkMsYUFBYSx1QkFBdUIsSUFBSSxjQUFjLFNBQVMsSUFBSSx3QkFBd0IsU0FBUywwQkFBMEIsNEJBQTRCLHFCQUFxQix1QkFBdUIsZ0RBQWdELGVBQWUsdUJBQXVCLElBQUksWUFBWSxTQUFTLElBQUksc0JBQXNCLFNBQVMsd0JBQXdCLFNBQVMsWUFBWSxNQUFNLFNBQVMsMkJBQTJCLFdBQVcsT0FBTyxRQUFRLGFBQWEsY0FBYyxLQUFLLEtBQUssYUFBYSxjQUFjLHNCQUFzQixNQUFNLE9BQU8sa0NBQWtDLE9BQU8sZUFBZSxTQUFTLElBQUksS0FBSyxhQUFhLE1BQU0sWUFBWSxLQUFLLFdBQVcsT0FBTyxRQUFRLG1CQUFtQix1QkFBdUIsb0NBQW9DLHVCQUF1QixZQUFZLG1CQUFtQixLQUFLLHFCQUFxQixzQkFBc0IscUJBQXFCLHlCQUF5QixtQkFBbUIsV0FBVyxhQUFhLDhCQUE4QixpQ0FBaUMsa0JBQWtCLGVBQWUsU0FBUyxVQUFVLGFBQWEsY0FBYyxpQkFBaUIsVUFBVSxtQkFBbUIsWUFBWSxXQUFXLHNCQUFzQiwwQkFBMEIsWUFBWSx1QkFBdUIsMkJBQTJCLHdCQUF3QixVQUFVLHNCQUFzQixxREFBcUQsaUJBQWlCLFdBQVcsb0JBQW9CLG1EQUFtRCxtQkFBbUIsWUFBWSxTQUFTLGdDQUFnQyxXQUFXLGtCQUFrQixpQkFBaUIsWUFBWSxZQUFZLFdBQVcsSUFBSSxzQ0FBc0MsUUFBUSxRQUFRLGlCQUFpQixpQkFBaUIsbUVBQW1FLFNBQVMsS0FBSywrQkFBK0IsaUJBQWlCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXE1vaGFtYWRcXE9uZURyaXZlXFxEZXNrdG9wXFxSdWhhbl9OZXh0K2FzcFxccnVoYW5cXG5vZGVfbW9kdWxlc1xcbmV4dFxcZGlzdFxcY29tcGlsZWRcXHByb2Nlc3NcXGJyb3dzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7dmFyIGU9ezIyOTpmdW5jdGlvbihlKXt2YXIgdD1lLmV4cG9ydHM9e307dmFyIHI7dmFyIG47ZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpe3Rocm93IG5ldyBFcnJvcihcInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpe3Rocm93IG5ldyBFcnJvcihcImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX0oZnVuY3Rpb24oKXt0cnl7aWYodHlwZW9mIHNldFRpbWVvdXQ9PT1cImZ1bmN0aW9uXCIpe3I9c2V0VGltZW91dH1lbHNle3I9ZGVmYXVsdFNldFRpbW91dH19Y2F0Y2goZSl7cj1kZWZhdWx0U2V0VGltb3V0fXRyeXtpZih0eXBlb2YgY2xlYXJUaW1lb3V0PT09XCJmdW5jdGlvblwiKXtuPWNsZWFyVGltZW91dH1lbHNle249ZGVmYXVsdENsZWFyVGltZW91dH19Y2F0Y2goZSl7bj1kZWZhdWx0Q2xlYXJUaW1lb3V0fX0pKCk7ZnVuY3Rpb24gcnVuVGltZW91dChlKXtpZihyPT09c2V0VGltZW91dCl7cmV0dXJuIHNldFRpbWVvdXQoZSwwKX1pZigocj09PWRlZmF1bHRTZXRUaW1vdXR8fCFyKSYmc2V0VGltZW91dCl7cj1zZXRUaW1lb3V0O3JldHVybiBzZXRUaW1lb3V0KGUsMCl9dHJ5e3JldHVybiByKGUsMCl9Y2F0Y2godCl7dHJ5e3JldHVybiByLmNhbGwobnVsbCxlLDApfWNhdGNoKHQpe3JldHVybiByLmNhbGwodGhpcyxlLDApfX19ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KGUpe2lmKG49PT1jbGVhclRpbWVvdXQpe3JldHVybiBjbGVhclRpbWVvdXQoZSl9aWYoKG49PT1kZWZhdWx0Q2xlYXJUaW1lb3V0fHwhbikmJmNsZWFyVGltZW91dCl7bj1jbGVhclRpbWVvdXQ7cmV0dXJuIGNsZWFyVGltZW91dChlKX10cnl7cmV0dXJuIG4oZSl9Y2F0Y2godCl7dHJ5e3JldHVybiBuLmNhbGwobnVsbCxlKX1jYXRjaCh0KXtyZXR1cm4gbi5jYWxsKHRoaXMsZSl9fX12YXIgaT1bXTt2YXIgbz1mYWxzZTt2YXIgdTt2YXIgYT0tMTtmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKXtpZighb3x8IXUpe3JldHVybn1vPWZhbHNlO2lmKHUubGVuZ3RoKXtpPXUuY29uY2F0KGkpfWVsc2V7YT0tMX1pZihpLmxlbmd0aCl7ZHJhaW5RdWV1ZSgpfX1mdW5jdGlvbiBkcmFpblF1ZXVlKCl7aWYobyl7cmV0dXJufXZhciBlPXJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtvPXRydWU7dmFyIHQ9aS5sZW5ndGg7d2hpbGUodCl7dT1pO2k9W107d2hpbGUoKythPHQpe2lmKHUpe3VbYV0ucnVuKCl9fWE9LTE7dD1pLmxlbmd0aH11PW51bGw7bz1mYWxzZTtydW5DbGVhclRpbWVvdXQoZSl9dC5uZXh0VGljaz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2Zvcih2YXIgcj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspe3Rbci0xXT1hcmd1bWVudHNbcl19fWkucHVzaChuZXcgSXRlbShlLHQpKTtpZihpLmxlbmd0aD09PTEmJiFvKXtydW5UaW1lb3V0KGRyYWluUXVldWUpfX07ZnVuY3Rpb24gSXRlbShlLHQpe3RoaXMuZnVuPWU7dGhpcy5hcnJheT10fUl0ZW0ucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9O3QudGl0bGU9XCJicm93c2VyXCI7dC5icm93c2VyPXRydWU7dC5lbnY9e307dC5hcmd2PVtdO3QudmVyc2lvbj1cIlwiO3QudmVyc2lvbnM9e307ZnVuY3Rpb24gbm9vcCgpe310Lm9uPW5vb3A7dC5hZGRMaXN0ZW5lcj1ub29wO3Qub25jZT1ub29wO3Qub2ZmPW5vb3A7dC5yZW1vdmVMaXN0ZW5lcj1ub29wO3QucmVtb3ZlQWxsTGlzdGVuZXJzPW5vb3A7dC5lbWl0PW5vb3A7dC5wcmVwZW5kTGlzdGVuZXI9bm9vcDt0LnByZXBlbmRPbmNlTGlzdGVuZXI9bm9vcDt0Lmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm5bXX07dC5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfTt0LmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifTt0LmNoZGlyPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX07dC51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX19O3ZhciB0PXt9O2Z1bmN0aW9uIF9fbmNjd3Bja19yZXF1aXJlX18ocil7dmFyIG49dFtyXTtpZihuIT09dW5kZWZpbmVkKXtyZXR1cm4gbi5leHBvcnRzfXZhciBpPXRbcl09e2V4cG9ydHM6e319O3ZhciBvPXRydWU7dHJ5e2Vbcl0oaSxpLmV4cG9ydHMsX19uY2N3cGNrX3JlcXVpcmVfXyk7bz1mYWxzZX1maW5hbGx5e2lmKG8pZGVsZXRlIHRbcl19cmV0dXJuIGkuZXhwb3J0c31pZih0eXBlb2YgX19uY2N3cGNrX3JlcXVpcmVfXyE9PVwidW5kZWZpbmVkXCIpX19uY2N3cGNrX3JlcXVpcmVfXy5hYj1fX2Rpcm5hbWUrXCIvXCI7dmFyIHI9X19uY2N3cGNrX3JlcXVpcmVfXygyMjkpO21vZHVsZS5leHBvcnRzPXJ9KSgpOyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/next/dist/compiled/process/browser.js\n");

/***/ })

});